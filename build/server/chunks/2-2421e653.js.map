{"version":3,"file":"2-2421e653.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/2.js"],"sourcesContent":["import { d as database } from \"../../chunks/database.js\";\nimport { r as redirect, f as fail } from \"../../chunks/index.js\";\nconst load = async ({ cookies }) => {\n  const session = cookies.get(\"session\");\n  if (!session) {\n    throw redirect(303, \"/login\");\n  }\n  const user = await database.user.findUnique({ where: { session } });\n  const notes = await database.note.findMany({ where: { authorId: user?.id } });\n  if (notes) {\n    return {\n      notes\n    };\n  }\n};\nconst actions = {\n  logout: async ({ request, cookies }) => {\n    await request.formData();\n    cookies.set(\"session\", \"\", {\n      path: \"/\",\n      expires: /* @__PURE__ */ new Date(0)\n      // Set the expiration date to a past date\n    });\n    throw redirect(303, \"/login\");\n  },\n  add: async ({ request, cookies }) => {\n    const form = await request.formData();\n    const session = cookies.get(\"session\");\n    const content = form.get(\"content\")?.toString();\n    const title = form.get(\"title\")?.toString();\n    if (!session) {\n      return fail(400, { error: \"Session expired!\" });\n    }\n    if (!title) {\n      return fail(400, { error: \"Title missing!\" });\n    }\n    if (!content) {\n      return fail(400, { error: \"Note text missing!\" });\n    }\n    const add = await database.user.update({ where: { session }, data: { notes: { create: { title, content } } } });\n    if (!add) {\n      return fail(400, { error: \"failed to add the note!\" });\n    }\n  },\n  delete: async ({ request, cookies }) => {\n    const form = await request.formData();\n    const noteString = form.get(\"noteId\")?.toString();\n    if (!noteString)\n      return;\n    const note_Id = parseInt(noteString);\n    if (!note_Id) {\n      return fail(400, { error: \"Couldn't find the note!\" });\n    }\n    const result = await database.note.delete({ where: { id: note_Id } });\n    if (!result) {\n      return fail(400, { error: \"Couldn't delete the note!\" });\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/_page.server.ts.js';\n\nexport const index = 2;\nexport const component = async () => (await import('../entries/pages/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/2.5e750a21.js\",\"_app/immutable/chunks/index.7a006170.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}